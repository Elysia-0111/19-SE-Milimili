{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Dplayer from 'dplayer';\nimport { ElPagination, ElMessageBox, ElImage, ElNotification } from 'element-plus';\nimport BackTop from './BackTop.vue';\nexport default {\n  props: ['isLogin', 'user', 'collection'],\n  components: {\n    ElPagination,\n    BackTop,\n    ElImage\n  },\n  data() {\n    return {\n      video: {},\n      uper: {},\n      player: {},\n      videoList: [],\n      now: 0,\n      summary_show: false,\n      comments: [],\n      pageSize: 3,\n      currentPages: [],\n      reply_show: false,\n      reply_list: [],\n      replyVideo: '',\n      userNames: [],\n      isCollected: false,\n      isLiked: false,\n      isCenter: true,\n      dialogVisible: false,\n      switcher_isActive: true,\n      newCollection: '',\n      profile: '../assets/logo.png',\n      profiles: [],\n      isUp: false,\n      showUpLoad: false,\n      loader: {},\n      progress: 0,\n      file: document.createElement('input'),\n      video_file: null\n    };\n  },\n  watch: {\n    video(value) {\n      document.title = value.title;\n      this.getUper(value.up);\n      this.getVideoList();\n      this.getComments(value.id);\n      this.getProfile();\n      this.$nextTick(() => {\n        if (this.$refs.summary_text.offsetHeight > 55) {\n          this.summary_show = true;\n          this.$refs.summary_more.addEventListener('click', () => {\n            if (this.$refs.text_container.offsetHeight > 55) {\n              this.$refs.summary_more.innerText = '展开';\n              this.$refs.text_container.style.height = '50px';\n            } else {\n              this.$refs.summary_more.innerText = '收起';\n              this.$refs.text_container.style.height = 'auto';\n            }\n          });\n        }\n      });\n    },\n    comments() {\n      for (let i = 0; i < this.comments.length; i++) {\n        this.currentPages.push(1);\n      }\n      this.$nextTick(() => {\n        const comments = document.querySelectorAll('.lower-comments-li-text');\n        comments.forEach(el => {\n          const text = el.querySelector('.lower-comments-li-text-main');\n          if (text.offsetHeight > 55) {\n            const btnShow = el.querySelector('.lower-comments-li-text-more');\n            const container = el.querySelector('.lower-comments-li-text-container');\n            btnShow.style.display = 'unset';\n            btnShow.onclick = () => {\n              if (container.offsetHeight > 55) {\n                btnShow.innerText = '展开';\n                container.style.maxHeight = '55px';\n              } else {\n                btnShow.innerText = '收起';\n                container.style.maxHeight = 'none';\n              }\n            };\n          }\n          this.reply_list.push('');\n          this.userNames.push('');\n        });\n      });\n    },\n    collection(value) {\n      this.isCollected = this.judgeIsCollected(value);\n    },\n    progress(value) {\n      this.$refs.progress_inner.style.width = value + '%';\n    }\n  },\n  methods: {\n    handleClose() {\n      ElMessageBox.confirm('确定关闭上传窗口吗? 将会停止上传!', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消'\n      }).then(() => {\n        this.showUpLoad = false;\n        this.progress = 0;\n        this.loader.abort();\n        this.video_file = null;\n      }).catch(() => {});\n    },\n    selectFile() {\n      this.file.click();\n    },\n    beforeVideoUpload(rawFile) {\n      if (rawFile.type !== 'video/mp4' && rawFile.type !== 'video/ogg') {\n        ElMessageBox.alert('只能上传 <b style=\"color:var(--ava)\">mp4、ogg</b> 格式的视频', '提示', {\n          dangerouslyUseHTMLString: true,\n          confirmButtonText: '确定'\n        });\n        return false;\n      } else if (rawFile.size / 1024 / 1024 > 500) {\n        ElMessageBox.alert('视频大小不能超过 <b style=\"color:var(--ava)\">500MB</b> ', '提示', {\n          dangerouslyUseHTMLString: true,\n          confirmButtonText: '确定'\n        });\n        return false;\n      }\n      return true;\n    },\n    uploadVideo(id) {\n      this.showUpLoad = true;\n      const xhr = new XMLHttpRequest();\n      this.loader = xhr;\n      xhr.open('post', 'https://kotokawa-akira-mywife.site/web/api/video/uploadVideo/' + id);\n      const data = new FormData();\n      data.append('video', this.video_file);\n      xhr.upload.addEventListener('progress', e => {\n        const num = e.loaded * 100 / e.total;\n        this.progress = num.toFixed(2);\n      });\n      xhr.addEventListener('readystatechange', () => {\n        if (xhr.readyState === xhr.DONE && xhr.status === 200) {\n          this.upload_id = '';\n          ElNotification({\n            title: '上传完毕',\n            message: '上传完毕',\n            duration: 0,\n            dangerouslyUseHTMLString: true\n          });\n          this.showUpLoad = false;\n          this.progress = 0;\n          this.clear();\n        }\n      });\n      xhr.send(data);\n    },\n    ajax(options, success, failure) {\n      const defaultOptions = {\n        url: '',\n        method: 'get',\n        responseType: 'text'\n      };\n      Object.assign(defaultOptions, options);\n      const xhr = new XMLHttpRequest();\n      xhr.open(defaultOptions.method, defaultOptions.url);\n      xhr.responseType = defaultOptions.responseType;\n      if (defaultOptions.header) {\n        const headerKeys = Object.keys(defaultOptions.header);\n        const headerValues = Object.values(defaultOptions.header);\n        for (const index in headerKeys) {\n          xhr.setRequestHeader(headerKeys[index], headerValues[index]);\n        }\n      }\n      xhr.addEventListener('readystatechange', () => {\n        if (xhr.readyState === xhr.DONE) {\n          if (xhr.status === 200) {\n            if (xhr.responseType === 'blob') {\n              success(xhr.response);\n            } else {\n              success(xhr.responseText);\n            }\n          } else if (xhr.status >= 400 && failure) {\n            failure({\n              statusCode: xhr.status,\n              statusText: xhr.statusText\n            });\n          }\n        }\n      });\n      if (defaultOptions.method === 'post') {\n        xhr.send(JSON.stringify(defaultOptions.body));\n      } else {\n        xhr.send();\n      }\n    },\n    getProfile() {\n      this.ajax({\n        method: 'get',\n        url: 'https://kotokawa-akira-mywife.site/web/api/account/getProfile/' + this.video.up,\n        responseType: 'blob'\n      }, res => {\n        if (res.type !== 'image/png') return;\n        const profileBlob = res;\n        this.profile = URL.createObjectURL(profileBlob);\n      });\n    },\n    getVideoId() {\n      const sps = window.location.pathname.split('/');\n      return sps[sps.length - 1];\n    },\n    getVideoInfo() {\n      fetch('https://kotokawa-akira-mywife.site/web/api/video/information/' + this.getVideoId(), {\n        method: 'get'\n      }).then(res => {\n        return res.json();\n      }).then(data => {\n        this.video = data;\n      });\n    },\n    getUper(id) {\n      fetch('https://kotokawa-akira-mywife.site/web/api/account/selectOneById/' + id, {\n        method: 'get'\n      }).then(res => {\n        return res.json();\n      }).then(data => {\n        this.uper = data;\n        if (this.video.up === this.user.id) {\n          this.isUp = true;\n        }\n      });\n    },\n    getVideoList() {\n      fetch('https://kotokawa-akira-mywife.site/web/api/video/videoList/' + this.getVideoId(), {\n        method: 'get',\n        headers: {\n          Origin: 'https://kotokawa-akira-mywife.site'\n        }\n      }).then(res => {\n        return res.json();\n      }).then(data => {\n        this.videoList = data;\n        this.$nextTick(() => {\n          this.player.video.src = 'https://kotokawa-akira-mywife.site/web/api/video/' + this.video.id + '/' + data[0];\n          this.now = 0;\n          const list = document.querySelectorAll('.video-change-li');\n          list[0].style.color = 'var(--ava)';\n        });\n      });\n    },\n    changeVideo(file, index) {\n      this.now = index;\n      this.player.video.src = 'https://kotokawa-akira-mywife.site/web/api/video/' + this.video.id + '/' + file;\n      this.player.video.play();\n      const list = document.querySelectorAll('.video-change-li');\n      list.forEach(element => {\n        element.style.color = 'unset';\n      });\n      list[index].style.color = 'var(--ava)';\n    },\n    getComments(id) {\n      fetch('https://kotokawa-akira-mywife.site/web/api/comments/getComments/' + id, {\n        method: 'get'\n      }).then(res => {\n        return res.json();\n      }).then(data => {\n        this.comments = data;\n      });\n    },\n    currentChange(index, value) {\n      this.currentPages[index] = value;\n      this.$nextTick(() => {\n        const comments = document.querySelectorAll('.lower-comments-li-text');\n        comments.forEach(el => {\n          const text = el.querySelector('.lower-comments-li-text-main');\n          const btnShow = el.querySelector('.lower-comments-li-text-more');\n          const container = el.querySelector('.lower-comments-li-text-container');\n          btnShow.onclick = null;\n          if (text.offsetHeight > 55) {\n            btnShow.style.display = 'unset';\n            btnShow.onclick = () => {\n              if (container.offsetHeight > 55) {\n                btnShow.innerText = '展开';\n                container.style.maxHeight = '55px';\n              } else {\n                btnShow.innerText = '收起';\n                container.style.maxHeight = 'none';\n              }\n            };\n          } else {\n            btnShow.style.display = 'none';\n          }\n        });\n      });\n    },\n    replyBtn(id, userName, index) {\n      const replyLis = document.querySelectorAll('.reply-li');\n      replyLis[index].style.setProperty('display', 'flex', 'important');\n      const textarea = replyLis[index].querySelector('textarea');\n      textarea.placeholder = `@${userName} | uid:${id}`;\n      this.userNames[index] = userName;\n    },\n    replyForVideo() {\n      if (!this.isLogin) {\n        ElMessageBox.alert('登录后即可发布评论', '提示', {\n          confirmButtonText: '确定'\n        });\n        return;\n      }\n      if (this.replyVideo === '') return;\n      this.addComment(this.video.id, this.user.id, this.user.name, this.replyVideo);\n      this.replyVideo = '';\n    },\n    replyForUser(userName, commentId, index) {\n      if (!this.isLogin) {\n        ElMessageBox.alert('登录后即可回复', '提示', {\n          confirmButtonText: '确定'\n        });\n        return;\n      }\n      if (this.reply_list[index] === '') return;\n      /* let text = ''\r\n      if (userName === this.userNames[index]) { text = this.reply_list[index] } else { text = `@${this.userNames[index]} ` + this.reply_list[index]}\r\n       this.addComment(commentId, this.user.id, this.user.name, text) */\n      this.reply_list[index] = '';\n    },\n    addComment(forid, uId, userName, text) {\n      fetch('https://kotokawa-akira-mywife.site/web/api/comments/addComment', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          forId: forid,\n          uid: uId,\n          text: text,\n          userName: userName\n        }),\n        credentials: 'include'\n      }).then(res => {\n        return res.json();\n      }).then(data => {\n        if (data.success === 'true') {\n          ElMessageBox.alert('发布成功!');\n          this.getComments(this.video.id);\n        } else if (data.reason === 'WordsForbidden') {\n          ElMessageBox.alert('评论包含敏感词汇!', '提示', {\n            confirmButtonText: '确定'\n          });\n        }\n      });\n    },\n    judgeIsCollected(collection) {\n      return collection.some(el => {\n        return el.videos.some(video => {\n          return video.id === this.video.id;\n        });\n      });\n    },\n    btnLike() {\n      this.btnLikeClick(!this.isLiked);\n      this.isLiked = !this.isLiked;\n    },\n    btnLikeClick(isLiked) {\n      let path = 'addLike';\n      if (!isLiked) path = 'disLike';\n      fetch('https://kotokawa-akira-mywife.site/web/api/video/' + path + '/' + this.video.id, {\n        method: 'get'\n      }).then(res => {\n        return res.json();\n      }).then(data => {\n        this.video.like = data;\n      });\n    },\n    btnCollection() {\n      if (!this.isLogin) {\n        ElMessageBox.alert('登录后即可加入收藏', '提示', {\n          confirmButtonText: '确定'\n        });\n        return;\n      }\n      if (this.isCollected) {\n        let Name = '';\n        this.collection.some(el => {\n          return el.videos.some(video => {\n            if (video.id === this.video.id) Name = el.name;\n            return video.id === this.video.id;\n          });\n        });\n        fetch('https://kotokawa-akira-mywife.site/web/api/collection/removeFromCollection', {\n          method: 'post',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            id: this.user.id,\n            name: Name,\n            videoId: this.video.id\n          }),\n          credentials: 'include'\n        }).then(res => {\n          return res.json();\n        }).then(data => {\n          if (data.success === 'true') {\n            this.video.collection -= 1;\n            this.isCollected = false;\n          }\n        });\n      } else this.dialogVisible = true;\n    },\n    addCollection(Name) {\n      fetch('https://kotokawa-akira-mywife.site/web/api/collection/addToCollection', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          id: this.user.id,\n          name: Name,\n          videoId: this.video.id\n        }),\n        credentials: 'include'\n      }).then(res => {\n        return res.json();\n      }).then(data => {\n        if (data.success === 'true') {\n          this.$parent.getCollection();\n          this.video.collection += 1;\n        }\n      });\n      this.dialogVisible = false;\n    },\n    showComment() {\n      this.switcher_isActive = true;\n      this.$refs.lower_left.style.display = 'block';\n      this.$refs.lower_more.style.display = 'none';\n    },\n    showMore() {\n      this.switcher_isActive = false;\n      this.$refs.lower_left.style.display = 'none';\n      this.$refs.lower_more.style.display = 'block';\n    },\n    addNewCollection() {\n      ElMessageBox.prompt(null, '添加到新建收藏夹', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        inputPlaceholder: '收藏夹名'\n      }).then(msg => {\n        if (msg.value.includes(':')) {\n          ElMessageBox.alert(\"由于系统设计，不能输入 ':' 字符\", '错误', {\n            confirmButtonText: '确定',\n            type: 'error'\n          });\n          return;\n        }\n        if (msg.value === '' || msg.value == null) {\n          ElMessageBox.alert('文件名不能为空!');\n          return;\n        }\n        this.addCollection(msg.value);\n      }).catch(() => {});\n    }\n  },\n  created() {\n    this.getVideoInfo();\n    this.file.type = 'file';\n  },\n  mounted() {\n    const player = new Dplayer({\n      container: this.$refs.player,\n      video: {\n        url: ''\n      },\n      theme: '#9AC8E2',\n      danmaku: {\n        api: 'https://kotokawa-akira-mywife.site/web/api/comments/getDanmaku/',\n        id: this.getVideoId()\n      }\n    });\n    this.player = player;\n    this.player.on('ended', () => {\n      if (this.now !== this.videoList.length - 1) {\n        const next = this.now + 1;\n        this.changeVideo(this.videoList[next], next);\n      }\n    });\n    window.addEventListener('scroll', () => {\n      if (document.documentElement.scrollTop > 380) {\n        this.reply_show = true;\n      } else this.reply_show = false;\n    });\n    this.file.addEventListener('change', () => {\n      const can = this.beforeVideoUpload(this.file.files[0]);\n      if (can) {\n        this.video_file = this.file.files[0];\n        this.uploadVideo(this.video.id);\n      }\n    });\n  }\n};","map":{"version":3,"names":["Dplayer","ElPagination","ElMessageBox","ElImage","ElNotification","BackTop","props","components","data","video","uper","player","videoList","now","summary_show","comments","pageSize","currentPages","reply_show","reply_list","replyVideo","userNames","isCollected","isLiked","isCenter","dialogVisible","switcher_isActive","newCollection","profile","profiles","isUp","showUpLoad","loader","progress","file","document","createElement","video_file","watch","value","title","getUper","up","getVideoList","getComments","id","getProfile","$nextTick","$refs","summary_text","offsetHeight","summary_more","addEventListener","text_container","innerText","style","height","i","length","push","querySelectorAll","forEach","el","text","querySelector","btnShow","container","display","onclick","maxHeight","collection","judgeIsCollected","progress_inner","width","methods","handleClose","confirm","confirmButtonText","cancelButtonText","then","abort","catch","selectFile","click","beforeVideoUpload","rawFile","type","alert","dangerouslyUseHTMLString","size","uploadVideo","xhr","XMLHttpRequest","open","FormData","append","upload","e","num","loaded","total","toFixed","readyState","DONE","status","upload_id","message","duration","clear","send","ajax","options","success","failure","defaultOptions","url","method","responseType","Object","assign","header","headerKeys","keys","headerValues","values","index","setRequestHeader","response","responseText","statusCode","statusText","JSON","stringify","body","res","profileBlob","URL","createObjectURL","getVideoId","sps","window","location","pathname","split","getVideoInfo","fetch","json","user","headers","Origin","src","list","color","changeVideo","play","element","currentChange","replyBtn","userName","replyLis","setProperty","textarea","placeholder","replyForVideo","isLogin","addComment","name","replyForUser","commentId","forid","uId","forId","uid","credentials","reason","some","videos","btnLike","btnLikeClick","path","like","btnCollection","Name","videoId","addCollection","$parent","getCollection","showComment","lower_left","lower_more","showMore","addNewCollection","prompt","inputPlaceholder","msg","includes","created","mounted","theme","danmaku","api","on","next","documentElement","scrollTop","can","files"],"sources":["C:\\Users\\Ziming Hao\\Documents\\GitHub\\19-SE-Milimili\\前端\\milimili\\src\\components\\MainView.vue"],"sourcesContent":["<template>\r\n    <main class=\"view-main\">\r\n        <section class=\"video-header\">\r\n            <div class=\"video-info\">\r\n                <div class=\"video-info-title\" title=\"测试标题\">\r\n                    测试标题\r\n                </div>\r\n                <div class=\"video-info-detail\">\r\n                    <div class=\"video-info-time\">\r\n                        <svg style=\"margin-right:8px\" xmlns=\"http://www.w3.org/2000/svg\" width=\"21\" height=\"21\"\r\n                            viewBox=\"0 0 24 24\">\r\n                            <path\r\n                                d=\"M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm1 12v-6h-2v8h7v-2h-5z\" />\r\n                        </svg>\r\n                        <span>\r\n                            测试上传时间\r\n                        </span>\r\n                    </div>\r\n                    <div class=\"video-info-playcount\">\r\n                        <svg style=\"margin-right:8px\" xmlns=\"http://www.w3.org/2000/svg\" width=\"21\" height=\"21\"\r\n                            viewBox=\"0 0 24 24\">\r\n                            <path\r\n                                d=\"M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-3 17v-10l9 5.146-9 4.854z\" />\r\n                        </svg>\r\n                        <span>测试播放量</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"video-info-uper\">\r\n                <a href=\"https://www.bilibili.com/\" target=\"_blank\">\r\n                    <el-image fit=\"cover\" draggable=\"false\"\r\n                        src=\"../assets/logo.png\" alt=\"\">\r\n                        <template #error>\r\n                            <img style=\"width: 100%;height: 100%;object-fit: cover;\"\r\n                                src=\"../assets/logo.png\" alt=\"\">\r\n                        </template>\r\n                    </el-image>\r\n                </a>\r\n                <a href=\"https://www.bilibili.com/\" target=\"_blank\">\r\n                    <div class=\"video-info-uper-name\">\r\n                        测试UP主\r\n                    </div>\r\n                </a>\r\n            </div>\r\n        </section>\r\n        <section class=\"player-container\">\r\n            <div class=\"player\" ref=\"player\"></div>\r\n        </section>\r\n        <section class=\"lower-switcher\">\r\n            <div class=\"lower-switcher-btn\" :class=\"{ 'lower-switcher-active': switcher_isActive }\"\r\n                @click=\"showComment\">评论\r\n            </div>\r\n            <div class=\"lower-switcher-btn\" :class=\"{ 'lower-switcher-active': !switcher_isActive }\" @click=\"showMore\">\r\n                选集\r\n            </div>\r\n        </section>\r\n        <section class=\"lower\">\r\n            <div class=\"lower-left\" ref=\"lower_left\">\r\n                <div class=\"lower-left-options\">\r\n                    <div style=\"display: flex;justify-content: flex-start;align-items: center;height: 70px;\">\r\n                        <div class=\"lower-left-options-li lower-left-options-like\" @click=\"btnLike\">\r\n                            <svg :class=\"{ 'btn-active': isLiked }\" xmlns=\"http://www.w3.org/2000/svg\" width=\"32\"\r\n                                height=\"32\" viewBox=\"0 0 24 24\">\r\n                                <path\r\n                                    d=\"M5 22h-5v-12h5v12zm17.615-8.412c-.857-.115-.578-.734.031-.922.521-.16 1.354-.5 1.354-1.51 0-.672-.5-1.562-2.271-1.49-1.228.05-3.666-.198-4.979-.885.906-3.656.688-8.781-1.688-8.781-1.594 0-1.896 1.807-2.375 3.469-1.221 4.242-3.312 6.017-5.687 6.885v10.878c4.382.701 6.345 2.768 10.505 2.768 3.198 0 4.852-1.735 4.852-2.666 0-.335-.272-.573-.96-.626-.811-.062-.734-.812.031-.953 1.268-.234 1.826-.914 1.826-1.543 0-.529-.396-1.022-1.098-1.181-.837-.189-.664-.757.031-.812 1.133-.09 1.688-.764 1.688-1.41 0-.565-.424-1.109-1.26-1.221z\" />\r\n                            </svg>\r\n                            <span :class=\"{ 'btn-active': isLiked }\">测试点赞</span>\r\n                        </div>\r\n                        <div class=\"lower-left-options-li lower-left-options-collection\" @click=\"btnCollection\">\r\n                            <svg :class=\"{ 'btn-active': isCollected }\" xmlns=\"http://www.w3.org/2000/svg\" width=\"32\"\r\n                                height=\"32\" viewBox=\"0 0 24 24\">\r\n                                <path\r\n                                    d=\"M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z\" />\r\n                            </svg>\r\n                            <span :class=\"{ 'btn-active': isCollected }\">测试收藏</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"options-info\">\r\n                        <a :href=\"'https://kotokawa-akira-mywife.site/web/Mine/' + video.up\" target=\"_blank\">\r\n                            <el-image fit=\"cover\" draggable=\"false\"\r\n                                :src=\"'https://kotokawa-akira-mywife.site/web/api/account/getProfile/' + video.up\"\r\n                                alt=\"\">\r\n                                <template #error>\r\n                                    <img style=\"width: 100%;height: 100%;object-fit: cover;\"\r\n                                        src=\"https://kotokawa-akira-mywife.site/web/api/account/getProfile/000\" alt=\"\">\r\n                                </template>\r\n                            </el-image>\r\n                        </a>\r\n                        <a :href=\"'https://kotokawa-akira-mywife.site/web/Mine/' + video.up\" target=\"_blank\">\r\n                            <div class=\"options-img-name\">{{ uper.name }}</div>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n                <div class=\"lower-left-summary\">\r\n                    <div style=\"padding:5px 0px 10px 0px;font-size: 16px;\">简介</div>\r\n                    <div class=\"lower-left-summary-text-container\" ref=\"text_container\">\r\n                        <div class=\"lower-left-summary-text\" ref=\"summary_text\">\r\n                            测试简介\r\n                        </div>\r\n                    </div>\r\n                    <span class=\"lower-left-summary-more\" ref=\"summary_more\" v-show=\"summary_show\">\r\n                        展开\r\n                    </span>\r\n                </div>\r\n                <div class=\"lower-comments\">\r\n                    <div style=\"text-align:left;font-size: 26px;color: #000;\">评论</div>\r\n                    <ul>\r\n                        <li class=\"lower-comments-li\" v-for=\"(item, index) in comments\" :key=\"item.time\">\r\n                            <div class=\"lower-comments-li-header\">\r\n                                <a :href=\"'https://kotokawa-akira-mywife.site/web/Mine/' + item.uid\">\r\n                                    <div class=\"lower-comments-li-img-container\">\r\n                                        <el-image fit=\"cover\" draggable=\"false\"\r\n                                            :src=\"'https://kotokawa-akira-mywife.site/web/api/account/getProfile/' + item.uid\"\r\n                                            alt=\"\">\r\n                                            <template #error>\r\n                                                <img style=\"width: 100%;height: 100%;object-fit: cover;\"\r\n                                                    src=\"https://kotokawa-akira-mywife.site/web/api/account/getProfile/000\"\r\n                                                    alt=\"\">\r\n                                            </template>\r\n                                        </el-image>\r\n                                    </div>\r\n                                </a>\r\n                                <a :href=\"'https://kotokawa-akira-mywife.site/web/Mine/' + item.uid\">\r\n                                    <div class=\"lower-comments-li-header-name\">\r\n                                        {{ item.userName }}\r\n                                    </div>\r\n                                </a>\r\n                            </div>\r\n                            <div class=\"lower-comments-li-text\">\r\n                                <div class=\"lower-comments-li-text-container\">\r\n                                    <div class=\"lower-comments-li-text-main\">\r\n                                        {{ item.text }}\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"lower-comments-li-text-time\">{{ item.time }}\r\n                                    <span class=\"reply_btn\" @click=\"replyBtn(item.uid, item.userName, index)\">回复</span>\r\n                                    <span class=\"lower-comments-li-text-more\">\r\n                                        展开\r\n                                    </span>\r\n                                </div>\r\n\r\n                            </div>\r\n                            <div class=\"lower-comments-li-reply\">\r\n                                <div class=\"lower-comments-li-reply-li\" v-for=\"reply in item.commentList.slice(\r\n                                    (this.currentPages[index] - 1) * this.pageSize,\r\n                                    this.currentPages[index] * this.pageSize\r\n                                )\" :key=\"reply.time\">\r\n                                    <div class=\"lower-comments-li-header\">\r\n                                        <div style=\"width:40px;height:40px;border-radius: 20px;overflow: hidden;\"\r\n                                            class=\"lower-comments-li-img-container\">\r\n                                            <a :href=\"'https://kotokawa-akira-mywife.site/web/Mine/' + reply.uid\">\r\n                                                <el-image style=\"width:40px;height:40px;\" fit=\"cover\" draggable=\"false\"\r\n                                                    :src=\"'https://kotokawa-akira-mywife.site/web/api/account/getProfile/' + reply.uid\"\r\n                                                    alt=\"\">\r\n                                                    <template #error>\r\n                                                        <img style=\"width: 40px;height: 40px;object-fit: cover;\"\r\n                                                            src=\"https://kotokawa-akira-mywife.site/web/api/account/getProfile/000\"\r\n                                                            alt=\"\">\r\n                                                    </template>\r\n                                                </el-image>\r\n                                            </a>\r\n                                        </div>\r\n                                        <a :href=\"'https://kotokawa-akira-mywife.site/web/Mine/' + reply.uid\">\r\n                                            <div style=\"font-size:18px\" class=\"lower-comments-li-header-name\">\r\n                                                {{ reply.userName }}\r\n                                            </div>\r\n                                        </a>\r\n                                    </div>\r\n                                    <div class=\"lower-comments-li-text\">\r\n                                        <div class=\"lower-comments-li-text-container\">\r\n                                            <div class=\"lower-comments-li-text-main\">\r\n                                                {{ reply.text }}\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class=\"lower-comments-li-text-time\">{{ reply.time }}\r\n                                            <span class=\"reply_btn\"\r\n                                                @click=\"replyBtn(reply.uid, reply.userName, index)\">回复</span>\r\n                                            <span class=\"lower-comments-li-text-more\">\r\n                                                展开\r\n                                            </span>\r\n                                        </div>\r\n\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"pagination\">\r\n                                    <el-pagination large layout=\"prev, pager, next\" :page-size=\"pageSize\"\r\n                                        :total=\"item.commentList.length\" :hide-on-single-page=\"true\"\r\n                                        :current-page=\"currentPages[index]\"\r\n                                        @current-change=\"(page) => currentChange(index, page)\" />\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"lower-reply reply-li\" style=\"position: unset;border-bottom: none;\">\r\n                                <div style=\"display:flex;justify-content:space-between;align-items: flex-start;\">\r\n                                    <div class=\"lower-reply-img-container\">\r\n                                        <el-image fit=\"cover\" draggable=\"false\"\r\n                                            :src=\"'https://kotokawa-akira-mywife.site/web/api/account/getProfile/' + user.id\"\r\n                                            alt=\"\">\r\n                                            <template #error>\r\n                                                <img src=\"https://kotokawa-akira-mywife.site/web/api/account/getProfile/000\"\r\n                                                    alt=\"\">\r\n                                            </template>\r\n                                        </el-image>\r\n                                    </div>\r\n                                    <div class=\"lower-reply-input\">\r\n                                        <textarea autocomplete=\"false\" rows=\"3\" placeholder=\"\"\r\n                                            v-model=\"reply_list[index]\"></textarea>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"lower-reply-submit\" @click=\"replyForUser(item.userName, item.id, index)\">\r\n                                    发布\r\n                                </div>\r\n                            </div>\r\n                        </li>\r\n                        <li style=\"margin:30px 0 10px 0;width: 100%;text-align: center;display: block;\">没有更多评论了~</li>\r\n                    </ul>\r\n                </div>\r\n\r\n            </div>\r\n            <div class=\"lower-more\" ref=\"lower_more\">\r\n                <div class=\"video-change\">\r\n                    <div style=\"padding-top:10px;font-size:18px;font-weight:bold\">视频选集</div>\r\n                    <div class=\"video-change-ul\">\r\n                        <div v-for=\"(item, index) in videoList\" :key=\"index\" class=\"video-change-li\"\r\n                            @click=\"changeVideo(item, index)\">\r\n                            <span>\r\n                                {{ item.split(\".\")[0] }}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"add-video video-change-li\" v-if=\"isUp\" @click=\"selectFile\">添加视频</div>\r\n                </div>\r\n                <div class=\"more\">\r\n\r\n                </div>\r\n            </div>\r\n        </section>\r\n        <transition name=\"fade\" appear>\r\n            <section class=\"lower-reply bottom_reply\" v-show=\"reply_show\">\r\n                <div style=\"display:flex;justify-content:space-between;align-items: flex-start;\">\r\n                    <div class=\"lower-reply-img-container\">\r\n                        <el-image fit=\"cover\" draggable=\"false\"\r\n                            src=\"../assets/logo.png\" alt=\"\">\r\n                            <template #error>\r\n                                <img src=\"../assets/logo.png\" alt=\"\">\r\n                            </template>\r\n                        </el-image>\r\n                    </div>\r\n                    <div class=\"lower-reply-input\">\r\n                        <textarea autocomplete=\"false\" rows=\"3\" placeholder=\"发条评论吧~\" v-model=\"replyVideo\"></textarea>\r\n                    </div>\r\n                </div>\r\n                <div class=\"lower-reply-submit\" @click=\"replyForVideo\">\r\n                    发布\r\n                </div>\r\n            </section>\r\n        </transition>\r\n        <transition name=\"fade\" appear>\r\n            <div class=\"backTop\" v-show=\"reply_show\">\r\n                <BackTop></BackTop>\r\n            </div>\r\n        </transition>\r\n    </main>\r\n    <div>\r\n        <el-dialog v-model=\"dialogVisible\" title=\"添加到收藏夹\" width=\"20%\" center>\r\n            <div style=\"display:flex;flex-direction:column;justify-content:flex-start;align-items: center;\">\r\n                <div class=\"dialog-collection-ul\">\r\n                    <div class=\"dialog-collection-li\" v-for=\"item in collection\" :key=\"item.name\"\r\n                        @click=\"addCollection(item.name)\">\r\n                        {{ item.name }}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <template #footer>\r\n                <span class=\"dialog-footer\">\r\n                    <el-button @click=\"addNewCollection\">新建</el-button>\r\n                    <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n                </span>\r\n            </template>\r\n        </el-dialog>\r\n        <el-dialog v-model=\"showUpLoad\" title=\"上传\" width=\"350px\" :before-close=\"handleClose\">\r\n            <div class=\"progress-outer\">\r\n                <div style=\"margin-bottom:15px\">{{ progress }}%</div>\r\n                <div class=\"progress-inner\" ref=\"progress_inner\"></div>\r\n            </div>\r\n            <template #footer>\r\n                <span class=\"dialog-footer\">\r\n                    <el-button type=\"primary\" @click=\"handleClose\">取消</el-button>\r\n                </span>\r\n            </template>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Dplayer from 'dplayer'\r\nimport { ElPagination, ElMessageBox, ElImage, ElNotification } from 'element-plus'\r\nimport BackTop from './BackTop.vue'\r\nexport default {\r\n  props: ['isLogin', 'user', 'collection'],\r\n  components: {\r\n    ElPagination,\r\n    BackTop,\r\n    ElImage\r\n  },\r\n  data () {\r\n    return {\r\n      video: {},\r\n      uper: {},\r\n      player: {},\r\n      videoList: [],\r\n      now: 0,\r\n      summary_show: false,\r\n      comments: [],\r\n      pageSize: 3,\r\n      currentPages: [],\r\n      reply_show: false,\r\n      reply_list: [],\r\n      replyVideo: '',\r\n      userNames: [],\r\n      isCollected: false,\r\n      isLiked: false,\r\n      isCenter: true,\r\n      dialogVisible: false,\r\n      switcher_isActive: true,\r\n      newCollection: '',\r\n      profile: '../assets/logo.png',\r\n      profiles: [],\r\n      isUp: false,\r\n      showUpLoad: false,\r\n      loader: {},\r\n      progress: 0,\r\n      file: document.createElement('input'),\r\n      video_file: null\r\n    }\r\n  },\r\n  watch: {\r\n    video (value) {\r\n      document.title = value.title\r\n      this.getUper(value.up)\r\n      this.getVideoList()\r\n      this.getComments(value.id)\r\n      this.getProfile()\r\n      this.$nextTick(() => {\r\n        if (this.$refs.summary_text.offsetHeight > 55) {\r\n          this.summary_show = true\r\n          this.$refs.summary_more.addEventListener('click', () => {\r\n            if (this.$refs.text_container.offsetHeight > 55) {\r\n              this.$refs.summary_more.innerText = '展开'\r\n              this.$refs.text_container.style.height = '50px'\r\n            } else {\r\n              this.$refs.summary_more.innerText = '收起'\r\n              this.$refs.text_container.style.height = 'auto'\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    comments () {\r\n      for (let i = 0; i < this.comments.length; i++) {\r\n        this.currentPages.push(1)\r\n      }\r\n      this.$nextTick(() => {\r\n        const comments = document.querySelectorAll('.lower-comments-li-text')\r\n        comments.forEach(el => {\r\n          const text = el.querySelector('.lower-comments-li-text-main')\r\n          if (text.offsetHeight > 55) {\r\n            const btnShow = el.querySelector('.lower-comments-li-text-more')\r\n            const container = el.querySelector('.lower-comments-li-text-container')\r\n            btnShow.style.display = 'unset'\r\n            btnShow.onclick = () => {\r\n              if (container.offsetHeight > 55) {\r\n                btnShow.innerText = '展开'\r\n                container.style.maxHeight = '55px'\r\n              } else {\r\n                btnShow.innerText = '收起'\r\n                container.style.maxHeight = 'none'\r\n              }\r\n            }\r\n          }\r\n          this.reply_list.push('')\r\n          this.userNames.push('')\r\n        })\r\n      })\r\n    },\r\n    collection (value) {\r\n      this.isCollected = this.judgeIsCollected(value)\r\n    },\r\n    progress (value) {\r\n      this.$refs.progress_inner.style.width = value + '%'\r\n    }\r\n  },\r\n  methods: {\r\n    handleClose () {\r\n      ElMessageBox.confirm('确定关闭上传窗口吗? 将会停止上传!', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消'\r\n      }).then(() => {\r\n        this.showUpLoad = false\r\n        this.progress = 0\r\n        this.loader.abort()\r\n        this.video_file = null\r\n      }).catch(() => { })\r\n    },\r\n    selectFile () {\r\n      this.file.click()\r\n    },\r\n    beforeVideoUpload (rawFile) {\r\n      if (rawFile.type !== 'video/mp4' && rawFile.type !== 'video/ogg') {\r\n        ElMessageBox.alert('只能上传 <b style=\"color:var(--ava)\">mp4、ogg</b> 格式的视频', '提示', { dangerouslyUseHTMLString: true, confirmButtonText: '确定' })\r\n        return false\r\n      } else if (rawFile.size / 1024 / 1024 > 500) {\r\n        ElMessageBox.alert('视频大小不能超过 <b style=\"color:var(--ava)\">500MB</b> ', '提示', { dangerouslyUseHTMLString: true, confirmButtonText: '确定' })\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    uploadVideo (id) {\r\n      this.showUpLoad = true\r\n      const xhr = new XMLHttpRequest()\r\n      this.loader = xhr\r\n      xhr.open('post', 'https://kotokawa-akira-mywife.site/web/api/video/uploadVideo/' + id)\r\n      const data = new FormData()\r\n      data.append('video', this.video_file)\r\n      xhr.upload.addEventListener('progress', (e) => {\r\n        const num = e.loaded * 100 / e.total\r\n        this.progress = num.toFixed(2)\r\n      })\r\n      xhr.addEventListener('readystatechange', () => {\r\n        if (xhr.readyState === xhr.DONE && xhr.status === 200) {\r\n          this.upload_id = ''\r\n          ElNotification({\r\n            title: '上传完毕',\r\n            message: '上传完毕',\r\n            duration: 0,\r\n            dangerouslyUseHTMLString: true\r\n          })\r\n          this.showUpLoad = false\r\n          this.progress = 0\r\n          this.clear()\r\n        }\r\n      })\r\n      xhr.send(data)\r\n    },\r\n\r\n    ajax (options, success, failure) {\r\n      const defaultOptions = {\r\n        url: '',\r\n        method: 'get',\r\n        responseType: 'text'\r\n      }\r\n      Object.assign(defaultOptions, options)\r\n      const xhr = new XMLHttpRequest()\r\n      xhr.open(defaultOptions.method, defaultOptions.url)\r\n      xhr.responseType = defaultOptions.responseType\r\n      if (defaultOptions.header) {\r\n        const headerKeys = Object.keys(defaultOptions.header)\r\n        const headerValues = Object.values(defaultOptions.header)\r\n        for (const index in headerKeys) {\r\n          xhr.setRequestHeader(headerKeys[index], headerValues[index])\r\n        }\r\n      }\r\n      xhr.addEventListener('readystatechange', () => {\r\n        if (xhr.readyState === xhr.DONE) {\r\n          if (xhr.status === 200) {\r\n            if (xhr.responseType === 'blob') { success(xhr.response) } else { success(xhr.responseText) }\r\n          } else if (xhr.status >= 400 && failure) {\r\n            failure({ statusCode: xhr.status, statusText: xhr.statusText })\r\n          }\r\n        }\r\n      })\r\n      if (defaultOptions.method === 'post') { xhr.send(JSON.stringify(defaultOptions.body)) } else { xhr.send() }\r\n    },\r\n    getProfile () {\r\n      this.ajax({\r\n        method: 'get',\r\n        url: 'https://kotokawa-akira-mywife.site/web/api/account/getProfile/' + this.video.up,\r\n        responseType: 'blob'\r\n      }, (res) => {\r\n        if (res.type !== 'image/png') return\r\n        const profileBlob = res\r\n        this.profile = URL.createObjectURL(profileBlob)\r\n      })\r\n    },\r\n    getVideoId () {\r\n      const sps = window.location.pathname.split('/')\r\n      return sps[sps.length - 1]\r\n    },\r\n    getVideoInfo () {\r\n      fetch('https://kotokawa-akira-mywife.site/web/api/video/information/' + this.getVideoId(), {\r\n        method: 'get'\r\n      }).then(res => {\r\n        return res.json()\r\n      }).then(data => {\r\n        this.video = data\r\n      })\r\n    },\r\n    getUper (id) {\r\n      fetch('https://kotokawa-akira-mywife.site/web/api/account/selectOneById/' + id, {\r\n        method: 'get'\r\n      }).then(res => {\r\n        return res.json()\r\n      }).then(data => {\r\n        this.uper = data\r\n        if (this.video.up === this.user.id) {\r\n          this.isUp = true\r\n        }\r\n      })\r\n    },\r\n    getVideoList () {\r\n      fetch('https://kotokawa-akira-mywife.site/web/api/video/videoList/' + this.getVideoId(), {\r\n        method: 'get',\r\n        headers: {\r\n          Origin: 'https://kotokawa-akira-mywife.site'\r\n        }\r\n      }).then(res => {\r\n        return res.json()\r\n      }).then(data => {\r\n        this.videoList = data\r\n        this.$nextTick(() => {\r\n          this.player.video.src = 'https://kotokawa-akira-mywife.site/web/api/video/' + this.video.id + '/' + data[0]\r\n          this.now = 0\r\n          const list = document.querySelectorAll('.video-change-li')\r\n          list[0].style.color = 'var(--ava)'\r\n        })\r\n      })\r\n    },\r\n    changeVideo (file, index) {\r\n      this.now = index\r\n      this.player.video.src = 'https://kotokawa-akira-mywife.site/web/api/video/' + this.video.id + '/' + file\r\n      this.player.video.play()\r\n      const list = document.querySelectorAll('.video-change-li')\r\n      list.forEach(element => {\r\n        element.style.color = 'unset'\r\n      })\r\n      list[index].style.color = 'var(--ava)'\r\n    },\r\n    getComments (id) {\r\n      fetch('https://kotokawa-akira-mywife.site/web/api/comments/getComments/' + id, { method: 'get' })\r\n        .then(res => {\r\n          return res.json()\r\n        }).then(data => {\r\n          this.comments = data\r\n        })\r\n    },\r\n    currentChange (index, value) {\r\n      this.currentPages[index] = value\r\n      this.$nextTick(() => {\r\n        const comments = document.querySelectorAll('.lower-comments-li-text')\r\n        comments.forEach(el => {\r\n          const text = el.querySelector('.lower-comments-li-text-main')\r\n          const btnShow = el.querySelector('.lower-comments-li-text-more')\r\n          const container = el.querySelector('.lower-comments-li-text-container')\r\n          btnShow.onclick = null\r\n          if (text.offsetHeight > 55) {\r\n            btnShow.style.display = 'unset'\r\n            btnShow.onclick = () => {\r\n              if (container.offsetHeight > 55) {\r\n                btnShow.innerText = '展开'\r\n                container.style.maxHeight = '55px'\r\n              } else {\r\n                btnShow.innerText = '收起'\r\n                container.style.maxHeight = 'none'\r\n              }\r\n            }\r\n          } else {\r\n            btnShow.style.display = 'none'\r\n          }\r\n        })\r\n      })\r\n    },\r\n    replyBtn (id, userName, index) {\r\n      const replyLis = document.querySelectorAll('.reply-li')\r\n      replyLis[index].style.setProperty('display', 'flex', 'important')\r\n      const textarea = replyLis[index].querySelector('textarea')\r\n      textarea.placeholder = `@${userName} | uid:${id}`\r\n      this.userNames[index] = userName\r\n    },\r\n    replyForVideo () {\r\n      if (!this.isLogin) {\r\n        ElMessageBox.alert('登录后即可发布评论', '提示', {\r\n          confirmButtonText: '确定'\r\n        })\r\n        return\r\n      }\r\n      if (this.replyVideo === '') return\r\n      this.addComment(this.video.id, this.user.id, this.user.name, this.replyVideo)\r\n      this.replyVideo = ''\r\n    },\r\n    replyForUser (userName, commentId, index) {\r\n      if (!this.isLogin) {\r\n        ElMessageBox.alert('登录后即可回复', '提示', {\r\n          confirmButtonText: '确定'\r\n        })\r\n        return\r\n      }\r\n      if (this.reply_list[index] === '') return\r\n      /* let text = ''\r\n      if (userName === this.userNames[index]) { text = this.reply_list[index] } else { text = `@${this.userNames[index]} ` + this.reply_list[index]}\r\n       this.addComment(commentId, this.user.id, this.user.name, text) */\r\n      this.reply_list[index] = ''\r\n    },\r\n    addComment (forid, uId, userName, text) {\r\n      fetch('https://kotokawa-akira-mywife.site/web/api/comments/addComment', {\r\n        method: 'post',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          forId: forid,\r\n          uid: uId,\r\n          text: text,\r\n          userName: userName\r\n        }),\r\n        credentials: 'include'\r\n      }).then(res => {\r\n        return res.json()\r\n      }).then(data => {\r\n        if (data.success === 'true') {\r\n          ElMessageBox.alert('发布成功!')\r\n          this.getComments(this.video.id)\r\n        } else if (data.reason === 'WordsForbidden') {\r\n          ElMessageBox.alert('评论包含敏感词汇!', '提示', {\r\n            confirmButtonText: '确定'\r\n          })\r\n        }\r\n      })\r\n    },\r\n    judgeIsCollected (collection) {\r\n      return collection.some(el => {\r\n        return el.videos.some(video => {\r\n          return video.id === this.video.id\r\n        })\r\n      })\r\n    },\r\n    btnLike () {\r\n      this.btnLikeClick(!this.isLiked)\r\n      this.isLiked = !this.isLiked\r\n    },\r\n    btnLikeClick (isLiked) {\r\n      let path = 'addLike'\r\n      if (!isLiked) path = 'disLike'\r\n      fetch('https://kotokawa-akira-mywife.site/web/api/video/' + path + '/' + this.video.id, { method: 'get' })\r\n        .then(res => {\r\n          return res.json()\r\n        }).then(data => {\r\n          this.video.like = data\r\n        })\r\n    },\r\n\r\n    btnCollection () {\r\n      if (!this.isLogin) {\r\n        ElMessageBox.alert('登录后即可加入收藏', '提示', {\r\n          confirmButtonText: '确定'\r\n        })\r\n        return\r\n      }\r\n      if (this.isCollected) {\r\n        let Name = ''\r\n        this.collection.some(el => {\r\n          return el.videos.some(video => {\r\n            if (video.id === this.video.id) Name = el.name\r\n            return video.id === this.video.id\r\n          })\r\n        })\r\n        fetch('https://kotokawa-akira-mywife.site/web/api/collection/removeFromCollection', {\r\n          method: 'post',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({ id: this.user.id, name: Name, videoId: this.video.id }),\r\n          credentials: 'include'\r\n        }).then(res => {\r\n          return res.json()\r\n        }).then(data => {\r\n          if (data.success === 'true') {\r\n            this.video.collection -= 1\r\n            this.isCollected = false\r\n          }\r\n        })\r\n      } else this.dialogVisible = true\r\n    },\r\n    addCollection (Name) {\r\n      fetch('https://kotokawa-akira-mywife.site/web/api/collection/addToCollection', {\r\n        method: 'post',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ id: this.user.id, name: Name, videoId: this.video.id }),\r\n        credentials: 'include'\r\n      }).then(res => {\r\n        return res.json()\r\n      }).then(data => {\r\n        if (data.success === 'true') {\r\n          this.$parent.getCollection()\r\n          this.video.collection += 1\r\n        }\r\n      })\r\n      this.dialogVisible = false\r\n    },\r\n    showComment () {\r\n      this.switcher_isActive = true\r\n      this.$refs.lower_left.style.display = 'block'\r\n      this.$refs.lower_more.style.display = 'none'\r\n    },\r\n    showMore () {\r\n      this.switcher_isActive = false\r\n      this.$refs.lower_left.style.display = 'none'\r\n      this.$refs.lower_more.style.display = 'block'\r\n    },\r\n    addNewCollection () {\r\n      ElMessageBox.prompt(null, '添加到新建收藏夹', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        inputPlaceholder: '收藏夹名'\r\n      }).then(msg => {\r\n        if (msg.value.includes(':')) {\r\n          ElMessageBox.alert(\"由于系统设计，不能输入 ':' 字符\", '错误', {\r\n            confirmButtonText: '确定',\r\n            type: 'error'\r\n          })\r\n          return\r\n        }\r\n        if (msg.value === '' || msg.value == null) {\r\n          ElMessageBox.alert('文件名不能为空!')\r\n          return\r\n        }\r\n        this.addCollection(msg.value)\r\n      }).catch(() => { })\r\n    }\r\n  },\r\n  created () {\r\n    this.getVideoInfo()\r\n    this.file.type = 'file'\r\n  },\r\n  mounted () {\r\n    const player = new Dplayer({\r\n      container: this.$refs.player,\r\n      video: {\r\n        url: ''\r\n      },\r\n      theme: '#9AC8E2',\r\n      danmaku: {\r\n        api: 'https://kotokawa-akira-mywife.site/web/api/comments/getDanmaku/',\r\n        id: this.getVideoId()\r\n      }\r\n    })\r\n    this.player = player\r\n    this.player.on('ended', () => {\r\n      if (this.now !== this.videoList.length - 1) {\r\n        const next = this.now + 1\r\n        this.changeVideo(this.videoList[next], next)\r\n      }\r\n    })\r\n    window.addEventListener('scroll', () => {\r\n      if (document.documentElement.scrollTop > 380) {\r\n        this.reply_show = true\r\n      } else this.reply_show = false\r\n    })\r\n\r\n    this.file.addEventListener('change', () => {\r\n      const can = this.beforeVideoUpload(this.file.files[0])\r\n      if (can) {\r\n        this.video_file = this.file.files[0]\r\n        this.uploadVideo(this.video.id)\r\n      }\r\n    })\r\n  }\r\n}\r\n</script>\r\n<style lang=\"css\">\r\n.dialog-collection-ul {\r\n    max-height: 300px;\r\n    width: 100%;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n}\r\n\r\n.dialog-collection-li {\r\n    font-size: 18px;\r\n    margin: 5px 0 5px 0;\r\n    padding: 5px;\r\n    border-radius: 5px;\r\n    border: 1px solid var(--line_regular);\r\n    user-select: none;\r\n    cursor: pointer;\r\n    transition: all .3s ease;\r\n}\r\n\r\n.dialog-collection-li:hover {\r\n    color: var(--ava);\r\n    border: 1px solid var(--ava);\r\n}\r\n\r\n.backTop {\r\n    position: fixed;\r\n    width: 50px;\r\n    height: 50px;\r\n    right: 30px;\r\n    bottom: 100px;\r\n}\r\n\r\n.lower ul {\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\n.lower li {\r\n    list-style: none;\r\n}\r\n\r\n.lower-comments {\r\n    padding: 15px 0 15px 0;\r\n    margin-bottom: 150px;\r\n}\r\n\r\n.lower-comments ul {\r\n    width: 100%;\r\n}\r\n\r\n.lower-comments li {\r\n    display: flex;\r\n\r\n}\r\n\r\n.player-container {\r\n    width: 100%;\r\n}\r\n\r\n.player {\r\n    aspect-ratio: 16/9;\r\n    width: 80%;\r\n    margin: 0 auto;\r\n    box-shadow: 0px 0px 10px 1px rgb(225 225 225 / 80%);\r\n}\r\n\r\n.video-header {\r\n    margin: 0 auto;\r\n    padding: 40px 0 30px 0;\r\n    width: 80%;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    box-sizing: border-box;\r\n}\r\n\r\n.video-info {\r\n    width: 65%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: flex-start;\r\n}\r\n\r\n.video-info-title {\r\n    font-size: 25px;\r\n    overflow: hidden;\r\n    width: 100%;\r\n    text-align: left;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    display: -webkit-box;\r\n    -webkit-box-orient: vertical;\r\n    -webkit-line-clamp: 2;\r\n    word-wrap: anywhere;\r\n}\r\n\r\n.video-info-detail {\r\n    width: 100%;\r\n    margin-top: 15px;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n}\r\n\r\n.video-info-time {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    font-size: 18px;\r\n    margin-right: 20px;\r\n}\r\n\r\n.video-info-playcount {\r\n    font-size: 18px;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n}\r\n\r\n.video-info-uper {\r\n    width: 30%;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    align-items: center;\r\n}\r\n\r\n.video-info-uper-img {\r\n    aspect-ratio: 1/1;\r\n    width: 70px;\r\n    overflow: hidden;\r\n    border-radius: 35px;\r\n    margin-right: 20px;\r\n}\r\n\r\n.video-info-uper-img img {\r\n    object-fit: cover;\r\n    height: 100%;\r\n    width: 100%;\r\n}\r\n\r\n.video-info-uper-name {\r\n    font-size: 30px;\r\n}\r\n\r\n.lower {\r\n    width: 80%;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: flex-start;\r\n    margin: 0 auto;\r\n    padding-top: 30px;\r\n    user-select: none;\r\n}\r\n\r\n.lower-left {\r\n    width: 65%;\r\n}\r\n\r\n.lower-more {\r\n    width: 30%;\r\n    margin: 5px 0 100px 0;\r\n}\r\n\r\n.video-change-ul::-webkit-scrollbar {\r\n    width: 5px;\r\n}\r\n\r\n.video-change-ul::-webkit-scrollbar-button {\r\n    opacity: 0.0;\r\n}\r\n\r\n.video-change-ul::-webkit-scrollbar-thumb {\r\n    background-color: rgb(139, 139, 139, 0.0);\r\n    border-radius: 3px;\r\n}\r\n\r\n.video-change-ul:hover::-webkit-scrollbar-thumb {\r\n    background-color: rgb(139, 139, 139, 1.0);\r\n}\r\n\r\n.video-change {\r\n    border-radius: 6px;\r\n    border: 1px solid var(--line_regular);\r\n    background-color: var(--bg_regular);\r\n}\r\n\r\n.video-change-ul {\r\n    max-height: 200px;\r\n    width: 100%;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    transition: all .3s ease;\r\n}\r\n\r\n.video-change-li {\r\n    text-align: left;\r\n    padding: 5px 10px 5px 10px;\r\n    margin: 5px;\r\n    height: 30px;\r\n    min-height: 30px;\r\n    max-height: 30px;\r\n    width: 90%;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    border-radius: 6px;\r\n    border: 1px solid transparent;\r\n    transition: all .3s ease;\r\n    cursor: pointer;\r\n}\r\n\r\n.video-change-li span {\r\n    width: 100%;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n}\r\n\r\n.video-change-li:hover {\r\n    max-height: 200px;\r\n    height: auto !important;\r\n    white-space: unset;\r\n    background: #fff;\r\n    border: 1px solid var(--line_regular);\r\n}\r\n\r\n.video-change-li:hover span {\r\n    overflow: unset;\r\n    text-overflow: unset;\r\n    white-space: pre-wrap;\r\n}\r\n\r\n.lower-left-options {\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: flex-start;\r\n    padding: 15px 0 15px 0;\r\n}\r\n\r\n.lower-left-summary {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items: flex-start;\r\n    font-size: 20px;\r\n    padding: 10px 0 10px 0;\r\n    border-top: 1px solid var(--line_regular);\r\n    border-bottom: 1px solid var(--line_regular);\r\n}\r\n\r\n.lower-left-summary-text {\r\n    user-select: text;\r\n    text-align: left;\r\n    font-size: 17px;\r\n    white-space: pre-wrap;\r\n}\r\n\r\n.lower-left-summary-text-container {\r\n    overflow: hidden;\r\n    height: 50px;\r\n}\r\n\r\n.lower-left-summary-more {\r\n    font-size: 16px;\r\n    transition: color .3s ease;\r\n    user-select: none;\r\n    cursor: pointer;\r\n    margin-top: 10px;\r\n    font-weight: bold;\r\n}\r\n\r\n.lower-left-summary-more:hover {\r\n    color: var(--ava);\r\n}\r\n\r\n.lower-left-options-li {\r\n    text-align: left;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    font-size: 24px;\r\n    margin-right: 50px;\r\n    transition: color .3s ease;\r\n    cursor: pointer;\r\n}\r\n\r\n.lower-left-options-li svg {\r\n    margin-right: 8px;\r\n    transition: fill .3s ease;\r\n}\r\n\r\n.lower-left-options-li:hover {\r\n    color: var(--ava);\r\n}\r\n\r\n.lower-left-options-li:hover svg {\r\n    fill: var(--ava);\r\n}\r\n\r\n.lower-comments-li {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: flex-start;\r\n    flex-direction: column;\r\n    padding: 20px 0 15px 0;\r\n    border-bottom: 1px solid var(--line_regular);\r\n}\r\n\r\n.lower-comments-li-img-container {\r\n    width: 70px;\r\n    height: 70px;\r\n    overflow: hidden;\r\n    border-radius: 35px;\r\n    margin-right: 20px;\r\n}\r\n\r\n.lower-comments-li-img-container img {\r\n    object-fit: cover;\r\n    width: 100%;\r\n}\r\n\r\n.lower-comments-li-header {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    width: 100%;\r\n}\r\n\r\n.lower-comments-li-header-name {\r\n    text-align: left;\r\n    font-size: 25px;\r\n    user-select: text;\r\n    max-width: 150px;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    display: -webkit-box;\r\n    -webkit-box-orient: vertical;\r\n    -webkit-line-clamp: 2;\r\n    word-wrap: anywhere;\r\n}\r\n\r\n.lower-comments-li-text {\r\n    padding: 20px 0 0px 0;\r\n    font-size: 20px;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: flex-start;\r\n    flex-direction: column;\r\n    width: 100%;\r\n}\r\n\r\n.lower-comments-li-text-main {\r\n    text-align: left;\r\n    user-select: text;\r\n    color: #000;\r\n}\r\n\r\n.lower-comments-li-text-more {\r\n    font-size: 16px;\r\n    font-weight: bolder;\r\n    margin: 10px 0 10px 10px;\r\n    transition: color .3s ease;\r\n    cursor: pointer;\r\n    display: none;\r\n}\r\n\r\n.lower-comments-li-text-time {\r\n    padding: 10px 0 0px 0;\r\n}\r\n\r\n.lower-comments-li-text-container {\r\n    overflow: hidden;\r\n    max-height: 55px;\r\n}\r\n\r\n.lower-comments-li-text-more:hover {\r\n    color: var(--ava)\r\n}\r\n\r\n.lower-comments-li-reply {\r\n    padding-left: 50px;\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n}\r\n\r\n.lower-comments-li-reply-li {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    width: 100%;\r\n    padding: 10px 0 10px 0;\r\n}\r\n\r\n.el-pager {\r\n    width: unset !important;\r\n}\r\n\r\n.reply_btn {\r\n    margin-left: 20px;\r\n    color: #000;\r\n    transition: color .3s ease;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n}\r\n\r\n.reply_btn:hover {\r\n    color: var(--ava)\r\n}\r\n\r\n.reply-li {\r\n    display: none !important;\r\n}\r\n\r\n.lower-reply-img-container {\r\n    width: 70px;\r\n    height: 70px;\r\n    border-radius: 35px;\r\n    overflow: hidden;\r\n    margin-right: 30px;\r\n}\r\n\r\n.lower-reply img {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.lower-reply {\r\n    border-top: 1px solid var(--line_regular);\r\n    border-bottom: 1px solid var(--line_regular);\r\n    position: fixed;\r\n    bottom: 0;\r\n    left: 10%;\r\n    width: 800px;\r\n    min-width: 400px;\r\n    padding: 10px 0 10px 0;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    background-color: #fff;\r\n}\r\n\r\n.lower-reply-input textarea {\r\n    outline: none;\r\n    border: 1px solid var(--line_regular);\r\n    width: 500px;\r\n    height: 45px;\r\n    font-family: inherit;\r\n    line-height: 38px;\r\n    color: #000;\r\n    resize: none;\r\n    transition: all .3s ease;\r\n    font-size: 20px;\r\n    line-height: 20px;\r\n    padding: 10px;\r\n}\r\n\r\n.lower-reply-input textarea:focus {\r\n    height: 120px;\r\n}\r\n\r\n.lower-reply-submit {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 45px;\r\n    aspect-ratio: 16/9;\r\n    border-radius: 6px;\r\n    background-color: var(--ava);\r\n    color: #fff;\r\n    transition: background-color .3s ease;\r\n    cursor: pointer;\r\n    user-select: none;\r\n}\r\n\r\n.lower-reply-submit:hover {\r\n    background-color: #9AC8FF;\r\n}\r\n\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n    transition: all .3s ease;\r\n}\r\n\r\n.fade-enter-from,\r\n.fade-leave-to {\r\n    opacity: 0.0 !important;\r\n}\r\n\r\n.fade-enter-to,\r\n.fade-leave-from {\r\n    opacity: 1.0 !important;\r\n}\r\n\r\n.btn-active {\r\n    fill: var(--ava) !important;\r\n    color: var(--ava) !important;\r\n}\r\n\r\n.dialog-footer button:first-child {\r\n    margin-right: 10px;\r\n}\r\n\r\n.lower-switcher {\r\n    display: none;\r\n    font-size: 20px;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    padding: 15px 0px 15px 0;\r\n    margin: 0 5px 0 5px;\r\n    border-bottom: 1px solid var(--line_regular);\r\n}\r\n\r\n.lower-switcher-active {\r\n    font-weight: 700;\r\n    color: var(--ava);\r\n}\r\n\r\n.options-img-container {\r\n    width: 50px;\r\n    aspect-ratio: 1/1;\r\n    margin-right: 10px;\r\n    overflow: hidden;\r\n    border-radius: 25px;\r\n}\r\n\r\n.options-img-container img {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n}\r\n\r\n.options-info {\r\n    display: none;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    font-size: 20px;\r\n}\r\n\r\n.el-dialog {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    margin: 0 !important;\r\n}\r\n\r\n.dialog-collection-ul::-webkit-scrollbar {\r\n    width: 5px;\r\n}\r\n\r\n.dialog-collection-ul::-webkit-scrollbar-button {\r\n    opacity: 0.0;\r\n}\r\n\r\n.dialog-collection-ul::-webkit-scrollbar-thumb {\r\n    background-color: rgb(139, 139, 139, 0.0);\r\n    border-radius: 3px;\r\n}\r\n\r\n.dialog-collection-ul:hover::-webkit-scrollbar-thumb {\r\n    background-color: rgb(139, 139, 139, 1.0);\r\n}\r\n\r\n.el-dialog__body {\r\n    padding: 5px 20px 5px 20px !important;\r\n}\r\n\r\n.el-image {\r\n    height: 70px;\r\n    width: 70px;\r\n    overflow: hidden;\r\n    border-radius: 35px;\r\n}\r\n\r\n.progress-outer {\r\n    width: 100%;\r\n    height: 60px;\r\n}\r\n\r\n.progress-inner {\r\n    width: 0%;\r\n    height: 20px;\r\n    background-color: var(--ava);\r\n    border: 1px solid var(--line_regular);\r\n}\r\n\r\n@media screen and (max-width:550px) {\r\n    .lower-left-summary {\r\n        font-size: 17px;\r\n    }\r\n\r\n    .lower-comments-li-text {\r\n        font-size: 14px;\r\n    }\r\n\r\n    .video-header {\r\n        width: 100%;\r\n        padding: 40px 10px 30px 10px;\r\n    }\r\n\r\n    .video-info {\r\n        width: 100%;\r\n    }\r\n\r\n    .player {\r\n        width: 100%;\r\n    }\r\n\r\n    .video-info-uper {\r\n        display: none;\r\n    }\r\n\r\n    .lower-comments-li {\r\n        overflow: hidden;\r\n    }\r\n\r\n    .el-dialog {\r\n        width: 80% !important;\r\n    }\r\n\r\n    .lower-reply {\r\n        opacity: 1.0 !important;\r\n        left: 0;\r\n        width: 100vw;\r\n    }\r\n\r\n    .bottom_reply {\r\n        display: flex !important;\r\n    }\r\n\r\n    .lower-reply-input textarea {\r\n        width: 120px !important;\r\n        font-size: 10px;\r\n    }\r\n\r\n    .lower {\r\n        width: 100%;\r\n        margin: 0;\r\n        padding: 0 5px 0 5px;\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    .lower-reply textarea {\r\n        width: 120px !important;\r\n    }\r\n\r\n    .lower-switcher {\r\n        display: flex;\r\n    }\r\n\r\n    .lower-left {\r\n        width: 100% !important;\r\n    }\r\n\r\n    .lower-more {\r\n        width: 100% !important;\r\n        display: none;\r\n    }\r\n\r\n    .reply-li {\r\n        width: 100%;\r\n    }\r\n\r\n    .options-info {\r\n        display: flex;\r\n    }\r\n\r\n    .lower-left-options-li {\r\n        margin-right: 3px;\r\n    }\r\n\r\n    .el-message-box {\r\n        width: 80% !important\r\n    }\r\n\r\n    .video-info-title {\r\n        font-size: 18px !important;\r\n    }\r\n\r\n    .video-info-time {\r\n        font-size: 15px !important;\r\n    }\r\n\r\n    .video-info-playcount {\r\n        font-size: 15px !important;\r\n    }\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}